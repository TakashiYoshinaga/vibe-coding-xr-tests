<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Solar System Viewer</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="js/components.js"></script>
    
    <!-- Styling for debug and test elements -->
    <style>
        .ar-mode #solar-system {
            transform: scale(0.5);
            transition: transform 0.3s ease;
        }
        
        .forced-ar-mode #solar-system {
            transform: scale(0.5);
        }
        
        #debug-info {
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
    
    <!-- Debug script for AR/VR testing -->
    <script>
        // Debug utilities for AR/VR mode testing
        window.addEventListener('load', function() {
            const urlParams = new URLSearchParams(window.location.search);
            
            // Debug mode
            if (urlParams.get('debug') === 'true') {
                // Add debug info to the page
                const debugInfo = document.createElement('div');
                debugInfo.id = 'debug-info';
                debugInfo.style.cssText = `
                    position: fixed; top: 10px; left: 10px; z-index: 1000;
                    background: rgba(0,0,0,0.8); color: white; padding: 10px;
                    font-family: monospace; font-size: 12px; border-radius: 5px;
                    max-width: 300px;
                `;
                debugInfo.innerHTML = `
                    <div>Debug Mode Active</div>
                    <div>User Agent: ${navigator.userAgent.includes('Quest') ? 'Meta Quest' : 'Other'}</div>
                    <div>URL Params: ${window.location.search || 'None'}</div>
                    <div id="xr-status">XR Status: Not entered</div>
                `;
                document.body.appendChild(debugInfo);
                
                // Update XR status
                const scene = document.querySelector('a-scene');
                const statusDiv = document.getElementById('xr-status');
                
                scene.addEventListener('enter-vr', () => {
                    statusDiv.textContent = 'XR Status: Entered XR mode';
                });
                
                scene.addEventListener('exit-vr', () => {
                    statusDiv.textContent = 'XR Status: Exited XR mode';
                });
            }
            
            // AR mode forcing
            if (urlParams.get('ar') === 'true') {
                document.body.classList.add('forced-ar-mode');
            }
        });
    </script>
</head>
<body>
    <a-scene xr-mode-ui="XRMode:xr"
             background="color: #000000"
             antialias="true"
             stats="false"
             debug="false"
             ui-wrapper="false"
        >
                  
        <!-- Solar System Container - AR/VRで太陽系が手前に表示されるように -->
        <a-entity id="solar-system" position="0 0 -5" ar-scale-adjuster="arScale: 0.5; vrScale: 1.0; arYOffset: 2.0; vrYOffset: 0.0">
            <!-- Sun -->
            <a-sphere position="0 0 0" radius="1" color="#FF5500" material="emissive: #FF5500; emissiveIntensity: 0.7">
                <a-light type="point" intensity="1.5"></a-light>
            </a-sphere>

            <!-- Orbit Lines -->
            <a-entity position="0 0 0">
                <!-- Mercury Orbit (2) -->
                <a-entity orbit-line="radius: 2; segments: 64; color: #FFFFFF; opacity: 0.5"></a-entity>
                <!-- Venus Orbit (3) -->
                <a-entity orbit-line="radius: 3; segments: 64; color: #FFFFFF; opacity: 0.5"></a-entity>
                <!-- Earth Orbit (4) -->
                <a-entity orbit-line="radius: 4; segments: 64; color: #FFFFFF; opacity: 0.5"></a-entity>
                <!-- Mars Orbit (5) -->
                <a-entity orbit-line="radius: 5; segments: 64; color: #FFFFFF; opacity: 0.5"></a-entity>
                <!-- Jupiter Orbit (6) -->
                <a-entity orbit-line="radius: 6; segments: 64; color: #FFFFFF; opacity: 0.5"></a-entity>
                <!-- Saturn Orbit (7) -->
                <a-entity orbit-line="radius: 7; segments: 64; color: #FFFFFF; opacity: 0.5"></a-entity>
                <!-- Uranus Orbit (8) -->
                <a-entity orbit-line="radius: 8; segments: 64; color: #FFFFFF; opacity: 0.5"></a-entity>
                <!-- Neptune Orbit (9) -->
                <a-entity orbit-line="radius: 9; segments: 64; color: #FFFFFF; opacity: 0.5"></a-entity>
            </a-entity>

            <!-- Planets -->
            <!-- Mercury -->
            <a-sphere position="2 0 0" radius="0.2" color="#8B4513"
                      planet-motion="rotationSpeed: 0.05; revolutionSpeed: 0.007; orbitRadius: 2"></a-sphere>
            <!-- Venus -->
            <a-sphere position="3 0 0" radius="0.25" color="#E3A857"
                      planet-motion="rotationSpeed: 0.04; revolutionSpeed: 0.0025; orbitRadius: 3"></a-sphere>
            <!-- Earth -->
            <a-sphere position="4 0 0" radius="0.3" color="#1F4788"
                      planet-motion="rotationSpeed: 0.05; revolutionSpeed: 0.0015; orbitRadius: 4"></a-sphere>
            <!-- Mars -->
            <a-sphere position="5 0 0" radius="0.25" color="#B22222"
                      planet-motion="rotationSpeed: 0.0475; revolutionSpeed: 0.0008; orbitRadius: 5"></a-sphere>
            <!-- Jupiter -->
            <a-sphere position="6 0 0" radius="0.6" color="#CD853F"
                      planet-motion="rotationSpeed: 0.1; revolutionSpeed: 0.000125; orbitRadius: 6"></a-sphere>
            <!-- Saturn -->
            <a-entity position="7 0 0" planet-motion="rotationSpeed: 0.075; revolutionSpeed: 0.00005; orbitRadius: 7">
                <a-sphere radius="0.5" color="#DAA520"></a-sphere>
                <a-ring radius-inner="0.6" radius-outer="0.8" color="#A0522D" rotation="75 0 0" material="side: double"></a-ring>
            </a-entity>
            <!-- Uranus -->
            <a-sphere position="8 0 0" radius="0.4" color="#6495ED"
                      planet-motion="rotationSpeed: 0.05; revolutionSpeed: 0.000018; orbitRadius: 8"></a-sphere>
            <!-- Neptune -->
            <a-sphere position="9 0 0" radius="0.4" color="#0000FF"
                      planet-motion="rotationSpeed: 0.05; revolutionSpeed: 0.000009; orbitRadius: 9"></a-sphere>
        </a-entity>
        
        <!-- Camera -->
        <a-entity id="rig" position="0 1.6 0">
            <a-camera look-controls="enabled: true"
                     wasd-controls="enabled: true">
            </a-camera>
            
            <!-- INDEPENDENT DEBUG SYSTEM - Comment out this entity to disable all debug functionality -->
            <a-entity debug-manager></a-entity>
            
            <!-- Left hand controller -->
            <a-entity id="left-controller" 
                     oculus-touch-controls="hand: left" 
                     vive-controls="hand: left"
                     windows-motion-controls="hand: left"
                     generic-tracked-controller="hand: left"
                     vr-zoom
                     vr-debug
                     visible="true">
            </a-entity>
                     
            <!-- Right hand controller -->
            <a-entity id="right-controller" 
                     oculus-touch-controls="hand: right" 
                     vive-controls="hand: right"
                     windows-motion-controls="hand: right"
                     generic-tracked-controller="hand: right"
                     vr-zoom
                     vr-debug
                     visible="true">
            </a-entity>
        </a-entity>

        <!-- Lighting -->
        <a-light type="ambient" color="#333333"></a-light>
        <a-light type="directional" position="0 5 0" color="#FFFFFF" intensity="0.3"></a-light>
        
        <!-- Stars background -->
        <a-entity stars="count: 1000; radius: 100"></a-entity>
    </a-scene>
</body>
</html>